<html>
<title> Weather Graph </title>
<head>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.js'></script>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/nvd3/1.1.15-beta/nv.d3.min.css' rel='stylesheet'>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
</head> 
<body onload="readFile();">
<h1> Weather Data from Mayaguez </h1>
<div id="output"></div>
  <script>

    nv.addGraph(function() {
    var chart = nv.models.lineChart()
      .useInteractiveGuideline(true)
      ;

    chart.xAxis
      .axisLabel('Time (date)')
      .tickFormat(function(d) {
        if (d == 0){
          return "03 May 2016 21:50:47";
        }
        else if (d == 1){
          return "03 May 2016 22:31:57";
        }
        else if (d == 2){
          return "04 May 2016 00:00:22";
        }
        else if (d == 3){
          return "04 May 2016 00:51:09";
        }
        else if (d == 4){
          return "04 May 2016 01:11:08";
        }
        else if (d == 5){
          return "04 May 2016 03:10:34";
        }
        else if (d == 6){
          return "04 May 2016 08:08:34";
        }
        // else if (d == 7){
        //   return "7:00 AM";
        // }
        // else if (d == 8){
        //   return "8:00 AM";
        // }
        // else if (d == 9){
        //   return "9:00 AM";
        // }
        // else if (d == 10){
        //   return "10:00 AM";
        // }
        // else if (d == 11){
        //   return "11:00 AM";
        // }
        // else if (d == 12){
        //   return "12:00 PM";
        // }
        // else if (d == 13){
        //   return "01:00 PM";
        // }
        // else if (d == 14){
        //   return "02:00 PM";
        // }
        // else if (d == 15){
        //   return "03:00 PM";
        // }
        // else if (d == 16){
        //   return "04:00 PM";
        // }
        // else if (d == 17){
        //   return "05:00 PM";
        // }
        // else if (d == 18){
        //   return "06:00 PM";
        // }
        // else if (d == 19){
        //   return "07:00 PM";
        // }
        // else if (d == 20){
        //   return "08:00 PM";
        // }
        // else if (d == 21){
        //   return "09:00 PM";
        // }
        // else if (d == 22){
        //   return "10:00 PM";
        // }
        // else if (d == 23){
        //   return "11:00 PM";
        // }
      })
      ;

    chart.yAxis
      .axisLabel('Temperature (F)')
      .tickFormat(function(d) { return d + " F"})
      ;

    d3.select('#chart svg')
      .datum(data())
      .transition().duration(500)
      .call(chart)
      ;

    nv.utils.windowResize(chart.update);

    return chart;
  });

  var json_string = ""

  temp = []

  d3.select("body").attr("align","center"); //  Setting the graph to the center
  
  function readFile() {
    jQuery.get('data/weather_Mayaguez.txt', function(txt){
      json_string = txt;
      var lines = txt.split("\n");
      // var temp = []; // Variable that will hold 
      for (var i = 0, len = lines.length; i < len; i++) {
        var json = JSON.parse(lines[i]);
        // console.log(json);
        console.log("{x:" + i + ",y:"+ json["temp_f"] + ",time:" + json["observation_time"] + "}");
        temp.push(json["temp_f"]);

      }
      // var json = JSON.parse(json_string);
      // console.log(json_string)
      // console.log(json["weather"]);
    })
  }
  // console.log(json_string)
  // var json = JSON.parse(json_string);
  // console.log(json["weather"]);

  var data = function() {
    var sin = []
    var temp = [
                  {x:0,y:75.3},
                  {x:1,y:74.3},
                  {x:2,y:76.7},
                  {x:3,y:72.9},
                  {x:4,y:72.8},
                  {x:5,y:72.6}
               ];
    // console.log(temp)
    // for (var i = 0; i < 100; i++) {
      // sin.push({x: i, y: Math.sin(i/10)});
      // console.log(sin)
    //   // cos.push({x: i, y: .5 * Math.cos(i/10)});
    // }

    return [
      {
        values: temp,
        key: 'Temperature',
        color: '#ff7f0e'
      }
      // },
      // {
      //   values: cos,
      //   key: 'Cosine Wave',
      //   color: '#2ca02c'
      // }
    ];
  }

  </script>


  <div id='chart' style='height:500px'>
    <svg></svg>
  </div>
</body>
</html>